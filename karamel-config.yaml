# Karamel Configuration Manifest
# Récapitulatif de toutes les configurations du projet

project:
  name: Karamel
  description: Desktop environment for Hyprland & Niri with DankMaterialShell
  theme: Catppuccin Mocha
  last_updated: "2026-01-23"
  changelog: "Added modular workspace command for project environments (workspace --mobilic)"
  version: "1.2.3"

colors:
  catppuccin:
    base: "#1e1e2e"
    surface0: "#313244"
    surface1: "#45475a"
    text: "#cdd6f4"
    mauve: "#cba6f7"
  karamel:
    beige: "#e8c8a0"
    orange: "#d4a574"
    orange_dark: "#c87830"
    brown: "#8b5a2b"

compositors:
  hyprland:
    main_config: configs/hyprland/hypr/hyprland.conf
    keybinds_universal: configs/hyprland/hypr/keybinds-universal.conf
    keybinds_dms: configs/hyprland/hypr/keybinds-dms.conf
    dms_settings: configs/hyprland/DankMaterialShell/settings.json
  niri:
    main_config: configs/niri/niri/config.kdl
    keybinds: configs/niri/niri/binds.kdl
    dms_settings: configs/niri/DankMaterialShell/settings.json

applications:
  fish:
    config: configs/shared/fish/config.fish
    plugin_manager: fisher
    plugins:
      - jorgebucaran/fisher           # Plugin manager
      - jhillyerd/plugin-git          # Git aliases (gst, gco, gaa, gc, gp, gl, etc.)
      - gazorby/fish-abbreviation-tips # Shows alias tips when typing full commands
    functions:
      - kpower: "Power management status/control"
      - kreload: "Reload compositor + regenerate keybinds"
      - kbinds: "Display keybinds (terminal or Walker)"
      - workspace: "Launch project development environments"
    workspace:
      config_dir: ~/.config/workspace/
      sessions_dir: ~/.config/kitty/sessions/
      commands:
        help: "workspace --help"
        list: "workspace --list"
        mobilic: "workspace --mobilic"
      projects:
        mobilic:
          config: ~/.config/workspace/mobilic.fish
          session: ~/.config/kitty/sessions/mobilic.conf
          workspaces:
            - ws1: "Dev (Kitty 3 panes + 2x Zed)"
            - ws2: "Web/Tools (Zen Browser + DBeaver)"
            - ws3: "Comms (Thunderbird + Mattermost)"
  kitty:
    config: configs/shared/kitty/kitty.conf
    shell: /usr/bin/fish
    font: "FiraCode Nerd Font Mono"
    prefix: "ctrl+q"
    splits:
      enabled_layouts: "splits,stack"
      vertical: "ctrl+q > i"
      horizontal: "ctrl+q > u"
      focus: "ctrl+q > h/j/k/l (vim-style)"
      resize: "ctrl+q > r"
      close: "ctrl+q > q"
      zoom: "ctrl+q > z (toggle stack layout)"
      new_tab: "ctrl+q > t"
    note: "Préfixe style tmux - ne pas mettre de commentaires inline sur les commandes 'launch'"
  alacritty:
    config: configs/shared/alacritty/alacritty.toml
    shell: /usr/bin/fish
    font: "FiraCode Nerd Font Mono"
    note: "Alternative légère à Kitty (pas de splits natifs)"
  fastfetch:
    config: configs/shared/fastfetch/config.jsonc
    logo: assets/karamel-cat.txt
  walker:
    config: configs/shared/walker/config.toml
    theme: configs/shared/walker/themes/karamel/style.css
  dms:
    settings: configs/shared/DankMaterialShell/settings.json

monitors:
  note: "Using native compositor configs (DMS display settings disabled due to positioning bug)"
  current_layout: "DP-3 left at 144Hz, eDP-1 right at 165Hz, vertically centered"
  gui_tool:
    package: wdisplays
    alias: kdisplay
    note: "GUI pour configurer les écrans (étendre, dupliquer, désactiver)"
  niri:
    config: ~/.config/niri/outputs.kdl
    dms_disabled: true  # dms/outputs.kdl include commented in config.kdl
  hyprland:
    config: ~/.config/hypr/monitors.conf
  position_examples:
    left: "DP-3 x=0, eDP-1 x=2560"
    right: "eDP-1 x=0, DP-3 x=1707"
    above: "DP-3 y=0, eDP-1 y=1440"
    below: "eDP-1 y=0, DP-3 y=1067"

gtk:
  gtk3: configs/shared/gtk-3.0/
  gtk4: configs/shared/gtk-4.0/

scripts:
  keybinds_menu: scripts/keybinds.sh
  keybinds_parser: scripts/karamel-keybinds.sh
  power_daemon: scripts/karamel-power-daemon.sh
  screenshot: scripts/screenshot.sh
  installer: install.sh
  verifier: verify-install.sh

installer_libs:
  utils: lib/utils.sh
  checks: lib/checks.sh
  packages: lib/packages.sh
  dotfiles: lib/dotfiles.sh
  themes: lib/themes.sh
  greeter: lib/greeter.sh
  plymouth: lib/plymouth.sh

plymouth:
  theme_dir: assets/plymouth/
  files:
    config: assets/plymouth/karamel.plymouth
    script: assets/plymouth/karamel.script
    logo: assets/plymouth/logo.png
    progress_bar: assets/plymouth/progress_bar.png
    progress_box: assets/plymouth/progress_box.png
    entry: assets/plymouth/entry.png
    bullet: assets/plymouth/bullet.png
    lock: assets/plymouth/lock.png
  install_path: /usr/share/plymouth/themes/karamel
  style:
    type: png
    font: "ANSI Shadow"
    rendering: png_image
    color: "#d4a574"
    background: "#1e1e2e"
    ascii_art: |
      ██╗  ██╗ █████╗ ██████╗  █████╗ ███╗   ███╗███████╗██╗
      ██║ ██╔╝██╔══██╗██╔══██╗██╔══██╗████╗ ████║██╔════╝██║
      █████╔╝ ███████║██████╔╝███████║██╔████╔██║█████╗  ██║
      ██╔═██╗ ██╔══██║██╔══██╗██╔══██║██║╚██╔╝██║██╔══╝  ██║
      ██║  ██╗██║  ██║██║  ██║██║  ██║██║ ╚═╝ ██║███████╗███████╗
      ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝╚══════╝
    note: "ASCII art converted to PNG for LUKS compatibility"

assets:
  logo_png: assets/karamel-logo.png
  logo_ascii: assets/karamel-cat.txt
  wallpapers: assets/wallpapers/
  plymouth: assets/plymouth/

greeter:
  type: dms-greeter
  sync_command: "dms greeter sync"
  status_command: "dms greeter status"
  cache_dir: /var/cache/dms-greeter
  synced_files:
    - settings.json
    - session.json
    - colors.json
  greetd_config: /etc/greetd/config.toml
  session_file: /usr/share/wayland-sessions/hyprland-dms.desktop
  note: "Theme synced from ~/.config/DankMaterialShell/ to greeter cache"

boot:
  loader: systemd-boot
  config: /boot/loader/loader.conf
  entry: /boot/loader/entries/karamel.conf
  entry_title: "Karamel"
  kernel_options: "quiet splash loglevel=3 rd.udev.log_level=3 vt.global_cursor_default=0 systemd.show_status=false"
  timeout: 1
  note: "Renamed from arch.conf to karamel.conf for consistency"

keybindings:
  organization:
    style: "Omarchy-inspired categories"
    format: "bindd (Hyprland) / hotkey-overlay-title (niri)"
    categories:
      - "APPLICATIONS - Lanceurs d'apps"
      - "AUDIO & MEDIA - Volume, lecture"
      - "LUMINOSITE - Contrôle écran"
      - "CAPTURES D'ECRAN - Screenshots"
      - "GESTION FENETRES - Fermer, flottant"
      - "NAVIGATION FENETRES - Focus"
      - "DEPLACEMENT FENETRES - Déplacer"
      - "NAVIGATION MONITEURS - Multi-écrans"
      - "WORKSPACES - Espaces de travail"
      - "REDIMENSIONNEMENT - Taille fenêtres"
      - "OUTILS SHELL - Pyprland, Hyprview"
      - "POWER MODES - Gestion batterie/performance"
      - "SYSTEME - Verrouillage, quitter"
      - "DMS SHELL - Contrôles DankMaterialShell"
  config_files:
    hyprland_universal: configs/hyprland/hypr/keybinds-universal.conf
    hyprland_dms: configs/hyprland/hypr/keybinds-dms.conf
    niri: configs/niri/niri/binds.kdl
  walker_menu:
    key: "Super + :"
    script: ~/Karamel/scripts/keybinds.sh
    parser: ~/Karamel/scripts/karamel-keybinds.sh
    output: ~/.config/karamel/keybinds.txt
    features:
      - "Détection auto du compositeur (niri/hyprland)"
      - "Niri: parse binds.kdl (hotkey-overlay-title)"
      - "Hyprland: utilise hyprctl binds -j (natif)"
      - "Icônes Nerd Font par catégorie"
      - "Conversion touches XF86 → Fn+F1-F9"
    fish_commands:
      kreload: "Reload config + régénère keybinds"
      kbinds: "Affiche keybinds dans terminal"
      kbinds -w: "Ouvre keybinds dans Walker"
    note: "Parser dynamique - exécuter kreload après modification des configs"
  workspaces:
    count: 4
    azerty_bindings:
      - "Super + & → Workspace 1"
      - "Super + é → Workspace 2"
      - "Super + \" → Workspace 3"
      - "Super + ' → Workspace 4"
      - "Super + Shift + [key] → Move to workspace"
    numpad_bindings:
      hyprland: "KP_1 to KP_4"
      niri: "KP_End, KP_Down, KP_Next, KP_Left"
    note: "Reduced to 4 workspaces to free Super + ( and Super + - for resize/preselect"
  lock_screen:
    key: "Ctrl + Alt + L"
    command: "loginctl lock-session"
    note: "Utilise DMS lock screen intégré (fonctionne sur Hyprland & niri)"
  screenshots:
    script: ~/Karamel/scripts/screenshot.sh
    output_dir: ~/Images/Screenshots
    tools:
      - grim    # Capture Wayland
      - slurp   # Sélection de région
      - satty   # Annotation
    keybinds:
      area: "Print"
      screen: "Ctrl + Print"
      copy: "Super + Shift + S"
    note: "Script universel pour Hyprland & niri avec annotation satty"
  azerty_adaptations:
    note: "Keybindings adaptés pour clavier AZERTY français"
    mappings:
      - "Super + ( (touche 5) → Absorber/expulser fenêtre gauche"
      - "Super + ) (touche °) → Absorber/expulser fenêtre droite"
      - "Super + - (touche 6) → Réduire largeur 10%"
      - "Super + = → Agrandir largeur 10%"
  framework_16_fn_keys:
    note: "Touches fonction Framework Laptop 16"
    mappings:
      - "Fn+F1 (XF86AudioMute) → Mute/Unmute"
      - "Fn+F2 (XF86AudioLowerVolume) → Volume -"
      - "Fn+F3 (XF86AudioRaiseVolume) → Volume +"
      - "Fn+F4 (XF86AudioPrev) → Piste précédente"
      - "Fn+F5 (XF86AudioPlay) → Lecture/Pause"
      - "Fn+F6 (XF86AudioNext) → Piste suivante"
      - "Fn+F7 (XF86MonBrightnessDown) → Luminosité -"
      - "Fn+F8 (XF86MonBrightnessUp) → Luminosité +"
      - "Fn+F9 (XF86Display) → Vue d'ensemble workspaces"
      - "Fn+F10 → Rétroéclairage clavier (hardware)"
      - "Fn+F11 (Print) → Screenshot"

audio:
  backend: pipewire
  packages:
    - pipewire          # Base audio daemon (dependency)
    - pipewire-pulse    # PulseAudio replacement
    - wireplumber       # Session manager
    - pavucontrol       # Volume control
    - playerctl         # Media keys
  services:
    - pipewire.service (user)
    - pipewire-pulse.service (user)
    - wireplumber.service (user)
  framework_16:
    issue: "PipeWire sélectionne le profil Headphones au lieu de Speaker par défaut"
    fix: /etc/wireplumber/wireplumber.conf.d/20-framework-speaker.conf
    device_name: "alsa_card.pci-0000_c2_00.6"
    default_profile: "HiFi (Mic1, Mic2, Speaker)"
    config: |
      monitor.alsa.rules = [
        {
          matches = [
            { device.name = "alsa_card.pci-0000_c2_00.6" }
          ]
          actions = {
            update-props = {
              device.profile = "HiFi (Mic1, Mic2, Speaker)"
            }
          }
        }
      ]
  note: "Redémarrer wireplumber après modification: systemctl --user restart wireplumber"

bluetooth:
  backend: bluez
  packages:
    - bluez
    - bluez-utils
  service: bluetooth.service
  enable_command: "sudo systemctl enable --now bluetooth"
  cli_tool: bluetoothctl
  gui_tool: "DMS Control Center"
  pairing_commands:
    - "power on"
    - "scan on"
    - "pair XX:XX:XX:XX:XX:XX"
    - "connect XX:XX:XX:XX:XX:XX"
    - "trust XX:XX:XX:XX:XX:XX"
  btusb_autosuspend_fix:
    issue: "Clavier/périphériques BT se déconnectent après inactivité"
    cause: "btusb autosuspend met le contrôleur USB en veille"
    fix_file: /etc/modprobe.d/btusb-no-autosuspend.conf
    fix_content: "options btusb enable_autosuspend=n"
    bug_ref: "https://bugzilla.kernel.org/show_bug.cgi?id=199351"
    reload_command: "sudo modprobe -r btusb && sudo modprobe btusb"
    verify_command: "cat /sys/module/btusb/parameters/enable_autosuspend"
    configured: "2026-01-20"
  framework_16:
    note: "Déconnexions occasionnelles avec écouteurs BT - redémarrer bluetooth.service si nécessaire"
  note: "DMS nécessite un redémarrage de session pour détecter les nouveaux adaptateurs"

power_management:
  backend: ectool chargecontrol + platform_profile + auto-cpufreq
  framework_driver: cros_charge-control (battery sustainer via ectool)
  packages:
    - fw-ectool-git  # AUR - Framework EC control
    - auto-cpufreq   # CPU frequency management on battery
  files:
    fish_function: ~/.config/fish/functions/kpower.fish
    daemon_script: ~/Karamel/scripts/karamel-power-daemon.sh
    systemd_service: ~/.config/systemd/user/karamel-power.service
    sudoers: /etc/sudoers.d/karamel-power
    sudoers_source: ~/Karamel/configs/system/sudoers.d/karamel-power
    dms_plugin: ~/.config/DankMaterialShell/plugins/karamel-power/
  system_paths:
    battery_sustainer: "ectool chargecontrol normal {START} {END}"
    cpu_profile: /sys/firmware/acpi/platform_profile
    ac_online: /sys/class/power_supply/ACAD/online
    battery_capacity: /sys/class/power_supply/BAT1/capacity
    charge_start_threshold: /sys/class/power_supply/BAT1/charge_control_start_threshold
    charge_end_threshold: /sys/class/power_supply/BAT1/charge_control_end_threshold
  modes:
    chill:
      icon: "eco"
      sustainer: "40-60%"
      platform_profile: low-power
      description: "Max savings - battery cycle 40-60%"
    notso:
      icon: "balance"
      sustainer: "60-80%"
      platform_profile: balanced
      description: "Balanced - battery cycle 60-80%"
    furious:
      icon: "bolt"
      sustainer: "0-100%"
      platform_profile: performance
      description: "Max performance - full charge"
  kpower_function:
    commands:
      status: "kpower status"
      set_mode: "kpower {chill|notso|furious}"
    status_output:
      - "Battery: capacity% (status)"
      - "Profile: platform_profile"
      - "Sustainer: start-end%"
      - "Daemon: current_mode"
    note: "Status reads from sysfs (no sudo required)"
  daemon:
    description: "Auto-switch mode based on CPU/GPU load (AC power only)"
    state_file: /tmp/karamel-power-mode
    cpu_detection: "Dual sampling from /proc/stat (1s interval)"
    gpu_detection: /sys/class/drm/card1/device/gpu_busy_percent
    check_interval: "~6s (5s sleep + 1s CPU sampling)"
    thresholds:
      chill: "load < 30%"
      notso: "load 30-70%"
      furious: "load > 70%"
    hysteresis: "6 consecutive checks (~30s) before switching"
    commands:
      enable: "systemctl --user enable --now karamel-power"
      status: "systemctl --user status karamel-power"
      logs: "journalctl --user -u karamel-power -f"
    behavior:
      on_ac: "Active - monitors load and auto-switches modes"
      on_battery: "Paused - auto-cpufreq handles power management"
  dms_integration:
    widget: "Karamel Power"
    location: "Control Center"
    features:
      - "Click to cycle through modes"
      - "Detail panel with 3 mode buttons"
      - "Shows sustainer range and CPU profile"
    plugin_file: KaramelPower.qml
  auto_cpufreq:
    service: auto-cpufreq.service (system)
    description: "Automatic CPU frequency management based on power source"
    behavior:
      on_battery:
        governor: powersave
        turbo: "disabled or limited"
        scaling: "Dynamic adjustment based on load"
      on_ac:
        governor: performance
        turbo: enabled
        scaling: "Allows maximum frequencies"
    commands:
      status: "auto-cpufreq --stats"
      live_monitor: "sudo auto-cpufreq --monitor"
    note: "Works automatically, no configuration needed"
  sudoers_rules:
    - "sarp ALL=(ALL) NOPASSWD: /usr/bin/ectool chargecontrol *"
    - "sarp ALL=(ALL) NOPASSWD: /usr/bin/tee /sys/firmware/acpi/platform_profile"
  note: |
    Framework 16 uses EC "battery sustainer" for START/END thresholds.
    Complete architecture:
    - On AC: karamel-power daemon auto-switches sustainer+profile based on CPU/GPU load
    - On battery: auto-cpufreq handles CPU automatically (powersave, turbo off)
    - platform_profile: Controls TDP envelope (low-power/balanced/performance)
    TLP and power-profiles-daemon are NOT used.
    Install sudoers: sudo cp ~/Karamel/configs/system/sudoers.d/karamel-power /etc/sudoers.d/ && sudo chmod 440 /etc/sudoers.d/karamel-power
    Tested: 2026-01-12 - daemon correctly switches modes based on CPU load with 30s hysteresis

idle_hibernate:
  description: "Auto-hibernate after 20 minutes of inactivity"
  timeout: 1200  # 20 minutes in seconds
  action: "systemctl hibernate"
  swap_size: "36 GB"
  idle_inhibit: "Supported - video playback (Firefox, mpv, VLC) prevents idle trigger"
  hyprland:
    daemon: hypridle
    config: configs/hyprland/hypr/hypridle.conf
    note: "Native Hyprland idle daemon"
  niri:
    daemon: swayidle
    config: ~/.config/swayidle/config
    note: "Wayland-compatible idle daemon (not managed by Karamel symlinks)"
  configured: "2026-01-13"

gpu:
  hardware: NVIDIA GeForce RTX 5070 Max-Q (Blackwell)
  driver: nvidia-open-dkms
  driver_version: "590.x"
  vulkan: true
  packages:
    - nvidia-open-dkms  # Kernel modules (required for Vulkan)
    - nvidia-utils      # Userspace libraries (dependency)
  note: |
    RTX 50 series (Blackwell) requires nvidia-open-dkms (not proprietary nvidia-dkms).
    Required for Zed editor and other Vulkan applications.
    Added: 2026-01-12

gaming:
  steam:
    package: steam
    proton_versions:
      - "Proton Experimental"  # Pour DLSS/RTX (Cyberpunk 2077)
      - "GE-Proton"            # Pour jeux problématiques (Bannerlord)
    proton_ge_manager: protonup-qt
    launch_options:
      default: "gamemoderun %command%"
      with_overlay: "gamemoderun mangohud %command%"
      with_gamescope: "gamescope -W 2560 -H 1440 -f -- gamemoderun %command%"
  packages:
    - steam                    # Client Steam
    - lib32-nvidia-utils       # Drivers NVIDIA 32-bit
    - lib32-vulkan-icd-loader  # Vulkan 32-bit
    - vulkan-tools             # Outils diagnostic Vulkan
    - gamemode                 # Optimisations gaming Feral
    - lib32-gamemode           # GameMode 32-bit
    - gamescope                # Microcompositeur Valve
    - mangohud                 # Overlay performance
    - lib32-mangohud           # MangoHud 32-bit
    - protonup-qt              # Gestionnaire Proton-GE (AUR)
    - protontricks             # Dépendances Windows (AUR)
  games:
    bannerlord:
      app_id: 261550
      proton: "GE-Proton"
      protontricks: "dotnet472 dotnet48 dotnet6"
      protondb: "Gold"
    cyberpunk_2077:
      app_id: 1091500
      proton: "Proton Experimental"
      protondb: "Platinum"
      note: "DLSS et RTX fonctionnent nativement"
  xwayland:
    package: xwayland-satellite
    display: ":0"
    startup: "spawn-at-startup in ~/.config/niri/startup.kdl"
    env: "DISPLAY=:0 in ~/.config/niri/config.kdl"
    note: "Requis pour Steam sur Niri (compositeur Wayland sans XWayland natif)"
  note: |
    Steam gaming configuré le 2026-01-12.
    Multilib activé dans /etc/pacman.conf.
    Utilisateur ajouté au groupe gamemode.
    xwayland-satellite ajouté pour support X11 sur Niri.

dms_customizations:
  settings_file: ~/.config/DankMaterialShell/settings.json
  system_monitor:
    enabled: false
    setting: "systemMonitorEnabled"
    note: "Overlay CPU/GPU/MEM/NET désactivé (était au centre de l'écran)"
  network:
    manager: "DMS Control Center"
    setting: "controlCenterShowNetworkIcon"
    note: "network-manager-applet supprimé - DMS gère le réseau nativement"
  reload_command: "quickshell -k && quickshell &"
  note: "Après modification des settings, recharger DMS avec la commande ci-dessus"

packages:
  manager: aconfmgr
  config_dir: ~/.config/aconfmgr
  install_command: "yay -S aconfmgr-git"
  commands:
    save: "aconfmgr save"
    apply: "aconfmgr apply"
    diff: "aconfmgr diff"
  config_files:
    - 10-base.sh          # Base system (kernel, firmware, etc.)
    - 20-desktop.sh       # Wayland compositors, greeter, Wayland tools, display management (wdisplays)
    - 30-audio-bluetooth.sh # PipeWire audio, Bluetooth, network
    - 35-power.sh         # Power management (fw-ectool, auto-cpufreq)
    - 40-terminal-shell.sh  # Terminal, shell, editors, launchers
    - 50-themes.sh        # GTK/Qt themes, cursor, icons, fonts
    - 60-dev.sh           # Development tools, AUR helpers
    - 70-apps.sh          # Applications (browser, messaging)
    - 75-gaming.sh        # Steam, Proton, gamemode, gamescope, mangohud
    - 90-temporaire.sh    # Temporary packages (to clean up)
    - 99-files.sh         # Modified system files + IgnorePaths
  workflow:
    install: "Ajouter 'AddPackage nom # description' dans le fichier .sh approprié, puis aconfmgr apply"
    remove: "Retirer la ligne AddPackage, puis aconfmgr apply"
    audit: "aconfmgr save pour voir les packages non déclarés"
  note: "Packages organisés par catégorie avec commentaires dans ~/.config/aconfmgr/*.sh"

ssh:
  key_manager: keychain
  algorithm: ed25519
  keys:
    github:
      file: ~/.ssh/id_ed25519_github_2025
      host: github.com
      user: gaspard-lonchampt
    scalingo:
      file: ~/.ssh/id_ed25519_mobilic_scalingo_2025
      host: ssh.osc-fr1.scalingo.com
  config_file: ~/.ssh/config
  fish_integration: ~/.config/fish/config.fish
  best_practices:
    - "Clés séparées par service"
    - "Nommage: id_{algo}_{service}_{year}"
    - "Passphrase obligatoire"
    - "Rotation tous les 2 ans"
  cli_tools:
    github: github-cli (pacman)
    scalingo: scalingo-cli (script officiel)
  note: "Configuré le 2026-01-13"

mobilic:
  description: "Application web de suivi du temps de travail des transporteurs routiers"
  project_dir: ~/Project/Mobilic
  repositories:
    frontend: mobilic (React)
    backend: mobilic-api (Flask/Python)
  packages:
    pacman:
      - pnpm              # Package manager Node.js
      - python-pip        # Package manager Python
      - python-pipenv     # Virtualenv + pip
      - pyenv             # Gestion versions Python
      - postgresql-libs   # Requis pour psycopg2
    aur:
      - fnm               # Fast Node Manager
  python:
    version: "3.13.11"
    manager: pyenv
    virtualenv: pipenv
    compilation_fix: "CFLAGS=\"-std=gnu17\" pipenv install  # GCC 15 C23 bool keyword fix"
  node:
    version: "24"
    manager: fnm
  services_docker:
    postgresql: "postgres:14.18-alpine (port 5432)"
    redis: "redis:alpine (port 6379)"
  fish_configs:
    - ~/.config/fish/conf.d/pyenv.fish
    - ~/.config/fish/conf.d/fnm.fish
  commands:
    start_services: "cd ~/Project/Mobilic/mobilic-api && docker compose up -d mobilic-db redis"
    start_backend: "cd ~/Project/Mobilic/mobilic-api && DOTENV_FILE=.env.local pipenv run flask run --host 0.0.0.0"
    start_frontend: "cd ~/Project/Mobilic/mobilic && REACT_APP_API_HOST=http://localhost:5000 pnpm start"
    migrations: "cd ~/Project/Mobilic/mobilic-api && pipenv run flask db upgrade"
  note: "Installé le 2026-01-22"

flatpak:
  packages:
    - com.usebottles.bottles  # Wine environment manager for Windows software
